<html style="max-height: 600px;">

<head>

  <title>Donation Organizations</title>


  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <link href="css/addons-pro/cards-extended.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
    integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
</head>

<ul class="topnav">
  <li><a href="/">Home</a></li>
  {% if user.is_authenticated %}
  <li><a href="/logout">Logout</a></li>
  {% else %}
  <li><a href="/login">Login</a></li>
  {% endif %}
  <li><a class="active" href="/donations/donationslist">Donation organizations</a></li>
  <li><a href="/donations/taskslist">Tasks</a>
  <li><a href="/donations/contact">Contact us</a></li>

  <li class="dropdown left">
    <a href="javascript:void(0)" class="dropbtn">Profile Information </i></a>
    <div class="dropdown-content">
      <a href="/donations/profile">Profile</a>
      <a href="/donations/fav_orgs">Favorited Organizations</a>
      <a href="/donations/spotlight">Spotlight Page</a>
      <a href="/donations/leaderboard">Leaderboard</a>
    </div>
  </li>
</ul>


<style>
  body {
    background-color: #D3D3D3;
  }

  body {
    margin: 0;
  }

  ul.topnav {
    list-style-type: none;
    margin: 0;
    padding: 0;
    background-color: #333;
    position: fixed;
    top: -30;
    width: 100vw;
    z-index: 1;
  }

  ul.topnav li {
    float: left;
  }

  ul.topnav li a {
    display: block;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
  }

  ul.topnav li:hover a:not(.active) {
    background-color: #D3D3D3;
    color: #000;
  }

  ul.topnav li a.active {
    background-color: #D2691E;
    color: white;
  }

  ul.topnav li.right {
    float: right;
  }

  @media screen and (max-width: 600px) {

    ul.topnav,
    ul.topnav {
      position: unset
    }

    ul.topnav li.right,
    ul.topnav li {
      float: none;
    }
  }

  ul.topnav .dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 10px;
    font-size: .9pc;

  }

  ul.topnav .dropdown-content a {
    color: black;
    text-decoration: none;
    display: block;
    width: 165px;
    font-size: .9pc;
  }

  ul.topnav .dropdown:hover>.dropdown-content {
    display: block;
  }


  body {
    background-color: #eeeeee;
    width: 100vw;
    text-align: center;
  }

  img {
    display: block;
    width: 80px;
    margin: 30px auto;
    box-shadow: 0 5px 10px -7px #333333;
    border-radius: 50%;

  }

  .form {
    background-color: #ffffff;
    width: 100vw;
    margin: 50px auto 10px auto;
    padding: 30px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 10px -3px #333;
    text-align: center;
  }

  input {
    border-radius: 100px;
    padding: 10px 15px;
    width: 50%;
    border: 1px solid #D9D9D9;
    outline: none;
    display: block;
    margin: 20px auto 20px auto;
  }

  button {
    border-radius: 100px;
    border: none;
    background: #719BE6;
    width: 100%;
    padding: 10px;
    color: #FFFFFF;
    margin-top: 25px;
    box-shadow: 0 2px 10px -3px #719BE6;
    display: block;
    margin: 55px auto 10px auto;
  }

  a {
    text-align: center;
    margin-top: 30px;
    color: #719BE6;
    text-decoration: none;
    padding: 5px;
    display: inline-block;
  }

  a:hover {
    text-decoration: underline;
  }

  .centered {
    position: absolute;
    top: 50%;
    left: 50%;
    /* bring your own prefixes */
    transform: translate(-50%, -50%);
  }
</style>

<body>
  <!--Grid row-->
  <div style="justify-content: center; margin-top:5em;" class="form-container container center" style="width:100vw; margin: 100px 13vw 0; ">
    <h2 style="font-family:sans-serif; text-align:center;">Organizations</h2>
    {% if user.is_authenticated %}
    <a class="btn btn-primary" href="/donations/donationslist/organizationform" role="button"
      style="margin-bottom: 5vh;">Add Organization</a>
    {% endif %}
    <div id="listContainer" class="row row-cols-1 row-cols-md-3" data-lengthOfList='{{ list_length }}'>
      {% if list_of_organizations %}
      {% for Organization in list_of_organizations %}
      <div class="col mb-4">
        <!-- Card -->
        <div class="card">

          <!--Card image-->
          <div class="view overlay">
            {% if Organization.organization_img_link %}
            <img class="card-img-top" src="{{Organization.organization_img_link}}" alt="Card image cap"
              style="height:12vmax;">
            {% else %}
            <img class="card-img-top" src="https://mdbootstrap.com/img/Photos/Others/images/16.jpg" alt="Card image cap"
              style="height:12vmax;">
            {% endif %}
            <a href="#!">
              <div class="mask rgba-white-slight"></div>
            </a>
          </div>

          <!--Card content-->
          <div id="cardContent-{{ forloop.counter0 }}" class="card-body" data-fundsGoal='{{ Organization.fundsGoal }}'>

            <!--Title-->
            <h4 class="card-title">{{ Organization.organization_text }}</h4>
            <!--Text-->
            <!-- <p class="card-text">{{ Organization.description_text }}</p> -->
            <!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
            <a href="{% url 'donations:org_description' Organization.id %}"><button type="button"
                class="btn btn-light-blue btn-md">Read more</button></a>
            <a href="{% url 'donations:checkout' Organization.id  %}" type="button"
              class="btn btn-light-blue btn-md">Donate</a>
            <form method="POST" action="{% url 'donations:add_fav_org' Organization.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-grey btn-md">Add To Favorites</button>
            </form>
            <div><span id="totalRaised" value="{{ Organization.fundsRaised }}"> ${{ Organization.fundsRaised }} out of
                ${{ Organization.fundsGoal }} raised</span></div>
            <div class="progbar-{{ forloop.counter0 }}" id="progressbar-{{ forloop.counter0 }}"
              value="{{ Organization.fundsRaised }}" data-totalRasied="5"></div>
          </div>

        </div>
        <!-- Card -->
      </div>
      {% endfor %}
      {% else %}
      <p>No organizations are available.</p>
      {% endif %}
    </div>

  </div>
  <!--Grid row-->
</body>

<script>

  var length = $('#listContainer').attr('data-lengthOfList')
  console.log("length", length)

  $(function () {
    for (var i = 0; i < length; i++) {
      var fundsGoal = parseInt($('#cardContent-' + i.toString()).attr('data-fundsGoal'))
      console.log("hello", fundsGoal)
      $('.progbar-' + i.toString()).progressbar({
        value: parseInt((parseInt($('.progbar-' + i.toString()).attr('value')) / fundsGoal) * 100)
      });
    }
  });

</script>

<footer class="page-footer unique-color-dark"
  style="height: 110px; width: 100vw; position: relative; background-color: black; color: white">
  <small>Author: names</small><br /><small><a href="mailto:rvj8uc@virginia.edu">emails</a></small><br /><small>&copy;
    Copyright 2020, names</small>

</footer>

</html>